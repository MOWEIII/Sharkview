<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AutoRenderer.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="720"
        x:Class="AutoRenderer.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/app-icon.ico"
        Title="Sharkview"
        Width="1280" Height="720"
        Background="{DynamicResource AppBackgroundBrush}"
        TransparencyLevelHint="Mica, AcrylicBlur"
        ExtendClientAreaToDecorationsHint="True">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="Auto, *">
        <!-- Top Bar -->
        <Border Grid.Row="0" Name="TitleBar" Background="{DynamicResource SurfaceBrush}" Padding="15,10" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1">
            <Grid>
                <!-- Logo / Title (Left) -->
                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center" HorizontalAlignment="Left" IsHitTestVisible="False">
                     <Image Source="/Assets/app-icon.ico" Width="48" Height="48" VerticalAlignment="Center"/>
                     <TextBlock Text="Sharkview" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource TextPrimaryBrush}"/>
                </StackPanel>
                
                <!-- Navigation Tabs (Center) -->
                <StackPanel Orientation="Horizontal" Spacing="5" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Button Command="{Binding NavigateToEditor}" Classes="Nav">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ " VerticalAlignment="Center"/>
                            <TextBlock Text="Editor" VerticalAlignment="Center" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>
                    
                    <Button Command="{Binding NavigateToConsole}" Classes="Nav">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ“Ÿ" VerticalAlignment="Center"/>
                            <TextBlock Text="Console" VerticalAlignment="Center" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>
                    
                    <Button Command="{Binding NavigateToSettings}" Classes="Nav">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="âš™ï¸" VerticalAlignment="Center"/>
                            <TextBlock Text="Settings" VerticalAlignment="Center" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <DockPanel>
                <!-- Status Bar -->
                <Border DockPanel.Dock="Bottom" Background="{DynamicResource SurfaceColor}" Padding="10,4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0">
                    <Grid ColumnDefinitions="Auto, *">
                        <TextBlock Text="READY" FontSize="10" FontWeight="Bold" Foreground="#4CD964" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Grid.Column="1" Text="{Binding LatestLog}" Foreground="{DynamicResource TextSecondaryBrush}" FontFamily="Consolas" FontSize="11" TextTrimming="CharacterEllipsis"/>
                    </Grid>
                </Border>
                
                <!-- Content -->
                <Border Padding="20">
                    <TransitioningContentControl Content="{Binding CurrentView}" />
                </Border>
            </DockPanel>
        </Grid>
    </Grid>

</Window>